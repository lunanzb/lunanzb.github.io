<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客">
<meta property="og:url" content="https://luna.newban.cn/page/133/index.html">
<meta property="og:site_name" content="开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://luna.newban.cn/page/133/">





  <title>开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
  
<a href="https://www.github.com/songjianzaina" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者的博客 – 全栈</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://www.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="http://code.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用kentico构建电子商务功能堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用kentico构建电子商务功能堆栈内存溢出.html" itemprop="url">c使用kentico构建电子商务功能堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Building e-commerce functions with kentico


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我正在建立一个具有某些电子商务功能的新网站，但是某些页面类型/页面模板不可用，例如“结帐”。 因此，如果我想从其他站点导入它们，是否有可能出现问题？ 还有一个问题：还有其他方法可以解决我的问题吗？

谢谢。

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

我不太确定您是否可以从其他站点导入结帐流程。 这是有关如何使用Kentico建立结帐流程的文档 。

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用iTextsharp使用HTML插入图像堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用iTextsharp使用HTML插入图像堆栈内存溢出.html" itemprop="url">c使用iTextsharp使用HTML插入图像堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Image insertion with HTML using iTextsharp


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我的要求是从HTML生成PDF，该HTML将在图像的顶部和底部以及中间有一些文本（具有对齐的中心和HTML表格），但是当我尝试使用PDFWriter.GetInstance（）插入图像时，对齐完全是偶然的。 谁能告诉我这样做的方法吗？

ps：img src无法使用，因为图像的位置在服务器上。 但是，当映像存储在某个本地驱动器中时，它可以正常工作。

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用getline读取csv文件时遇到问题堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用getline读取csv文件时遇到问题堆栈内存溢出.html" itemprop="url">c使用getline读取csv文件时遇到问题堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Having trouble using getline to read from a .csv file


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
程序的一部分包括尝试读取.csv文件中的行并将其部分存储到结构中。 但是，当我尝试执行下面显示的代码时，在控制台中被告知存在一个无效的stod实例。 有了这些信息，我进入了调试器，发现没有文件从文件中读取任何东西到我创建的伪变量（ part1 - part4 ）中，并且它们的值仍然为"" 。

我正在阅读的.csv中的示例行是：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Photo Editor &amp; Candy Camera &amp; Grid &amp; ScrapBook,ART_AND_DESIGN,4.1,159,19M,10;000+,Free,0,Everyone,Art &amp; Design,January 7; 2018,1.0.0,4.0.3 and up&quot;</span><br></pre></td></tr></table></figure>


我只想直到它说"159" （又称评论数）。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt; #include &lt;cmath&gt; #include &lt;iomanip&gt; #include &lt;fstream&gt; #include &lt;sstream&gt; #include &lt;string&gt; using namespace std; struct App &#123; std::string name; std::string category; double rating; int reviewNum; &#125;; void readData(App appList[], const int size) &#123; ifstream inFile; inFile.open(&quot;googleplaystore.csv&quot;); if(inFile.fail()) &#123; cout &lt;&lt; &quot;File open error!&quot;; exit(0); //Close program &#125; for(int appIndex = 0; appIndex &lt; size; appIndex++) &#123; string part1, part2, part3, part4, trash = &quot;&quot;; //Line1 getline(inFile, part1, &apos;,&apos;); //read until , getline(inFile, part2, &apos;,&apos;); getline(inFile, part3, &apos;,&apos;); getline(inFile, part4 , &apos;,&apos;); getline(inFile, trash); //read until end of line appList[appIndex].name = part1; appList[appIndex].category = part2; appList[appIndex].rating = stod(part3); appList[appIndex].reviewNum = stoi(part4); if(inFile.fail()) &#123; cout &lt;&lt; &quot;File read error!&quot;; exit(0); //Close program &#125; &#125; int main() &#123; cout &lt;&lt; fixed &lt;&lt; setprecision(1); App appList[NUM_RECORDS] = &#123;&#125;; readData(appList, NUM_RECORDS); &#125;</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：1 已采纳</strong></p>

您的程序执行错误的错误检查。 它尝试读取文件末尾的内容，失败，忽略错误，然后尝试将不存在的输入字符串转换为double 。 这将导致异常。 在程序尝试执行所有这些操作之后 ，现在检查文件已为时已晚。 完成后立即检查每个IO操作是否成功。 一种流行的方法是逐行读取输入，然后tgen分别解析每行，例如，如下面的代码片段所示。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> while (std::getline(infile, instring)) &#123;</span><br><span class="line">   std::istringstream linestream (instring);</span><br><span class="line">   // read the linestream</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#2 票数：1</strong></p>

除了@n指出的问题。 代词 由于无法验证getline的返回，您将很快遇到尝试通过使用','作为分隔符（或任何其他非换行分隔符）对getline进行连续调用来解析.csv文件的限制。 当您指定除'\\n'以外的分隔符时，尝试读取所有字段时， getline将忽略'\\n'寻找下一个',' 。 取而代之的是，通常是从.csv读取的行创建一个stringstream流，然后使用getline和定界符从stringstream解析您需要的内容。 为什么？ 您的stringstream只有一行数据，因此getline必须在读取最后一个字段后停止-因为stringstream将为空...由于您未读取所有字段，因此可以使用字段计数器和临时字段App实例以填充数据。 您只需switch(fieldcount) {...}即可switch(fieldcount) {...}读取的数据分离为正确的成员变量。 您已经在使用std::string ，还可以#include <vector>并使用std::vector<app>进行存储，而不是一个普通的旧数组。 您可以简单地将std::vector<app>作为读取函数的返回类型，并在读取.csv文件时填充向量，然后返回该向量以在程序的其他位置使用。 将各个部分放在一起，您可以按以下方式定义读取功能： 现在只需声明一个App的临时实例，从line创建一个std::stringstream ，一个std:string来保存每个字段并循环从std:string中获取每个字段，例如 现在您有了字段，只需switch字段计数器将其分配给正确的成员变量，然后在填充第4 个字段后，将您的App的临时实例添加到向量中，例如 保留在读取循环中的所有操作是更新字段计数器nfield并提供标签来打破嵌套循环并进行switch ，例如 从文件中读取所有行之后，只需返回向量： 您可以从main()调用read函数，类似于： 简而言之，您可以执行以下操作将googleplay .csv中的所有所需信息读入App的向量中， 使用/输出示例 使用dat/googleplay.csv文件中提供的单行输入，您将从程序接收以下输出： 读取每一行并使用std::stringstream从逗号分隔的值中解析您的字段可以解决许多您需要利用所有字段时遇到的问题。 它还允许消耗每次调用getline的整个输入行，以防止在文件格式出现问题时部分读取一行。 仔细研究一下，并考虑使用App向量而不是普通的旧数组的优点。 如果您还有其他问题，请告诉我。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> /* function reading csv and returning std::vector&lt;App&gt; containing</span><br><span class="line"> * first 4 fields from each line of input .csv</span><br><span class="line"> */</span><br><span class="line">std::vector&lt;App&gt; read_csv (const std::string&amp; name)</span><br><span class="line">&#123;</span><br><span class="line">    std::vector&lt;App&gt; v &#123;&#125;;          /* vector of App */</span><br><span class="line">    std::string line;               /* string to hold each line */</span><br><span class="line">    std::ifstream fin (name);       /* input file stream */</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#3 票数：1</strong></p>

尽管已经接受了答案，但我想展示一种更“现代”的C ++方法。 如果您可以研究此解决方案并在将来尝试使用某些功能，我将很高兴。 在面向对象的世界中，我们使用类（或结构）并将对数据进行操作的数据和函数放在一个（封装的）对象中。 只有该类应该知道如何读取和写入其数据。 没有一些外部全局功能。 因此，我在您的结构中添加了2个成员函数。 我已经覆盖了插入器和提取器运算符。 在提取器中，我们将使用现代C ++算法将字符串拆分为标记。 为此，我们有std::sregex_token_iterator 。 并且因为有一个专用的功能用于此目的，我们应该使用它。 此外，它非常简单。 使用下面的单行代码，我们将完整的字符串拆分为令牌，并将生成的令牌放入std::vector 然后，将结果数据复制到我们的成员变量中。 对于演示输出，我还覆盖了inserter运算符。 现在，您可以对类型为App的变量使用除数运算符和插入符（“ >>”和“ <<”），就像对任何其他c ++整数变量一样。 总的来说，我们也使用一种超简单的方法。 首先，我们打开文件并检查是否可以。 然后，我们定义一个变量“ apps”（app的std::vector ），并使用其范围构造函数和std::istream_operator读取完整的文件。 而且，由于该应用程序具有覆盖的提取程序运算符，因此它知道如何读取并为我们解析完整的csv文件。 再次，非常简单和短的单线 将读取完整的源文件，所有行，解析行并将成员变量存储在生成的std::vector的单个app元素中。 请参见下面的完整示例： 可惜没有人读过这个。 。 免责声明：这是纯示例代码，没有生产力，因此没有错误处理。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::vector token(std::sregex_token_iterator(line.begin(), line.end(), delimiter, -1), &#123;&#125;);</span><br></pre></td></tr></table>

</”），就像对任何其他c></app></app></vector>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用VisualStudioC进行单元测试时的链接器错误堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用VisualStudioC进行单元测试时的链接器错误堆栈内存溢出.html" itemprop="url">c使用VisualStudioC进行单元测试时的链接器错误堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Linker error while unit testing with Visual Studio C++


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我想用Visual Studio对C ++项目进行单元测试。 将项目中的文件夹添加为测试项目的包含路径后，尝试编译测试时出现链接器错误：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Severity Code Description Project File Line Suppression State Error LNK2019 unresolved external symbol &quot;public: __thiscall Piece::Piece(enum Color)&quot; (??0Piece@@QAE@W4Color@@@Z) referenced in function &quot;public: __thiscall Bishop::Bishop(enum Color)&quot; (??0Bishop@@QAE@W4Color@@@Z) ChessPlusPlus-Tests D:\Documents\Projects\ChessPlusPlus\ChessPlusPlus-Tests\BishopTests.obj 1 Error LNK2019 unresolved external symbol &quot;public: __thiscall Board::~Board(void)&quot; (??1Board@@QAE@XZ) referenced in function &quot;public: void __thiscall ChessPlusPlusTests::BishopTests::ValidMovesTest(void)&quot; (?ValidMovesTest@BishopTests@ChessPlusPlusTests@@QAEXXZ) ChessPlusPlus-Tests D:\Documents\Projects\ChessPlusPlus\ChessPlusPlus-Tests\BishopTests.obj 1 Error LNK2019 unresolved external symbol &quot;public: void __thiscall Board::placePieceAt(class Piece * const,struct Position)&quot; (?placePieceAt@Board@@QAEXQAVPiece@@UPosition@@@Z) referenced in function &quot;public: void __thiscall ChessPlusPlusTests::BishopTests::ValidMovesTest(void)&quot; (?ValidMovesTest@BishopTests@ChessPlusPlusTests@@QAEXXZ) ChessPlusPlus-Tests D:\Documents\Projects\ChessPlusPlus\ChessPlusPlus-Tests\BishopTests.obj 1 Error LNK2001 unresolved external symbol &quot;public: virtual class std::vector&lt;struct Position,class std::allocator&lt;struct Position&gt; &gt; __thiscall Bishop::getMovesFor(struct Position,class Board &amp;)&quot; (?getMovesFor@Bishop@@UAE?AV?$vector@UPosition@@V?$allocator@UPosition@@@std@@@std@@UPosition@@AAVBoard@@@Z) ChessPlusPlus-Tests D:\Documents\Projects\ChessPlusPlus\ChessPlusPlus-Tests\BishopTests.obj 1 Error LNK2001 unresolved external symbol &quot;public: virtual class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; __thiscall Bishop::toString(void)&quot; (?toString@Bishop@@UAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) ChessPlusPlus-Tests D:\Documents\Projects\ChessPlusPlus\ChessPlusPlus-Tests\BishopTests.obj 1 Error LNK2001 unresolved external symbol &quot;public: virtual class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; __thiscall Bishop::toShortString(void)&quot; (?toShortString@Bishop@@UAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) ChessPlusPlus-Tests D:\Documents\Projects\ChessPlusPlus\ChessPlusPlus-Tests\BishopTests.obj 1</span><br></pre></td></tr></table></figure>


我的测试源代码：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdafx.h&quot; #include &quot;CppUnitTest.h&quot; #include &quot;Bishop.h&quot; #include &quot;Board.h&quot; #include &quot;TestUtils.h&quot; using namespace Microsoft::VisualStudio::CppUnitTestFramework; namespace ChessPlusPlusTests &#123; TEST_CLASS(BishopTests) &#123; public: TEST_METHOD(ValidMovesTest) &#123; // Arrange Board board&#123;&#125;; Bishop *piece = new Bishop&#123; Color::WHITE &#125;; Position pos&#123; 3,3 &#125;; board.placePieceAt(piece, pos); // Act auto validPositions = piece-&gt;getMovesFor(pos, board); // Assert TestUtils::AssertPositions(validPositions, &#123; 0,0,0,0,0,0,0,1, 1,0,0,0,0,0,1,0, 0,1,0,0,0,1,0,0, 0,0,1,0,1,0,0,0, 0,0,0,0,0,0,0,0, 0,0,1,0,1,0,0,0, 0,1,0,0,0,1,0,0, 1,0,0,0,0,0,1,0, &#125;); &#125; &#125;; &#125;</span><br></pre></td></tr></table></figure>


如果不添加包含路径，则测试项目不会编译，因为主项目中包含的头文件依赖于包含路径。

主项目编译正常。

有人可以帮助我了解问题出在哪里吗？

谢谢！

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：3 已采纳</strong></p>

https://www.codeproject.com/Tips/1085171/How-To-Do-Unit-Testing-with-Cplusplus-in-Visual-St 我发现在那里，您还必须将.h和.cpp文件作为现有文件添加到测试项目中。 那个在官方文档中被遗漏了，或者我错过了。 现在可以了！
**===============>>#2 票数：0**

我只是遇到了同样的问题，并按照以下Microsoft文档的不同方式解决了该问题： https : //docs.microsoft.com/nl-nl/visualstudio/test/unit-testing-existing-cpp-applications-with-test -explorer？view = vs-2015＆redirectedfrom = MSDN＃objectRef 我认为，此解决方案比较干净，因为您最终并不会将被测试项目中的所有头文件也显示在测试项目中。 斜体文档中的行，粗体行是我的补充： 如果要测试的代码未导出要测试的功能，则可以将输出.obj或.lib文件添加到测试项目的依赖项中。 创建一个C ++测试项目。 在文件菜单上，选择新建，项目，Visual C ++，测试，C ++单元测试项目。 确保将要测试的项目添加为“引用”。 如果您忘记了，还可以稍后在“解决方案资源管理器”窗口中添加这些引用。 在解决方案资源管理器中，在测试项目的快捷菜单上，选择“属性”。 将打开项目属性窗口。 选择“配置属性”，“链接器”，“输入”，“其他依赖项”。 选择“编辑”，然后添加.obj或.lib文件的名称。 不要使用完整路径名。 对我来说，只有.obj文件。 我在Intermediates文件夹中找到了它们，该文件夹有多个版本，每个版本对应解决方案平台（x86或x64）和解决方案配置（调试或发行版）的每种组合。 如果您有很多.obj（或.lib）文件，我发现打开终端并运行ls（或dir）来获取文件名，编辑掉我没有的.log，.txt和.pdb文件名非常方便。不需要，然后将.obj文件名列表复制粘贴到Visual Studio中。 为了方便编辑，请注意，您可以单击“其他依赖项”输入字段右侧的下拉箭头，然后单击“编辑”。 选择“配置属性”，“链接器”，“常规”，“其他库目录”。 选择“编辑”，然后添加.obj或.lib文件的目录路径。 该路径通常在被测项目的build文件夹中。 对我来说，我只有.obj文件。 我在Intermediates文件夹中找到了它们，该文件夹有多个版本，每个版本对应解决方案平台（x86或x64）和解决方案配置（调试或发行版）的每种组合。 为所有4种组合设置此路径的方便宏是：$（SolutionDir）bin \\ $（PlatformTarget）\\ $（IntermediateOutputPath）Intermediates。 您可能必须取出bin \\部分，因为我还看到输出文件夹直接在解决方案目录中设置，而不是在单独的二进制文件夹中设置。 选择“配置属性”，“ VC ++目录”，“包含目录”。 选择“编辑”，然后添加要测试的项目的头目录。 对于此目录，可以直接指向作为被测试项目一部分的文件夹。 无需将头文件复制到测试项目中。 如果该目录不仅仅包含标题，也可以。 例如，我的源文件夹同时包含.h文件和.cpp文件。 完成这些步骤之后，我可以通过简单的编写将头文件包含在测试代码中： #include“ SomeHeaderName.h” 因此，无需指定头文件所在的文件夹。 确保清洁并重建整个解决方案。 然后，您的测试应该能够访问要测试的项目的功能。
**===============>>#3 票数：0**

我认为所选答案不正确。 测试通常应在其环境中运行； 因此，他们不应访问实现（.cpp） 在Visual Studio（VS 2017）上创建单独的测试项目时，需要创建要测试项目的引用（右键单击测试项目->添加->参考->勾号项目）： 添加参考 如果看到一些链接器错误，请从单元测试项目中右键单击：项目->链接器->输入->其他依赖项->编辑，然后将路径添加到.obj文件。 您可以尝试类似“ $（SolutionDir）ConsoleApplication1 \\ $（IntDir）*。obj”，其中ConsoleApplication1是目标项目名称。 .obj的路径 最初，我只想对Cornelis的帖子发表评论，但我不能。

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用Read和Write函数连接2个文件堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用Read和Write函数连接2个文件堆栈内存溢出.html" itemprop="url">c使用Read和Write函数连接2个文件堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Using Read() and Write() Functions to Concatenate 2 Files


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我目前正在学习如何使用read（）和write（）函数来实现连接文件的程序。

我将一个名为“ NotesBetweenTwoSisters2.txt”的文本文件连接到另一个名为“ NotesBetweenTwoSisters1.txt”的文本文件的末尾。 （因此，现在NotesBetweenTwoSisters1.txt具有更大的文件大小。）

“ NotesBetweenTwoSisters1.txt”

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Madam, Keep an eye on the radar. If it doesn&apos;t look that good for kayak paddling tonight, then the next time which we can rent the kayak is tomorrow noon. But at that time you will have to take care of the pup, and only your darling and I can enjoy the trip. Sis</span><br></pre></td></tr></table></figure>


“ NotesBetweenTwoSisters2.txt”

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi sis, I only deal with loyal ones. Obviously the pup is much more loyal. You and I really see eye to eye on this issue. Enjoy your kayak paddling. &quot;Your Madam&quot;</span><br></pre></td></tr></table></figure>


我已经编写了在终端上按预期输出两个文件内容的代码，但是我不确定是否在正确地进行串联。 如果有人能帮助我正确使用read（）和write（）函数将文件串联在一起，我将不胜感激！

当前程序代码

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt; #include &lt;fstream&gt; #include &lt;string&gt; using namespace std; int main() &#123; fstream inFile1; fstream inFile2; fstream outFile; inFile1.open(&quot;NotesBetweenTwoSisters1.txt&quot;, ios::in|ios::binary); inFile2.open(&quot;NotesBetweenTwoSisters2.txt&quot;, ios::in|ios::binary); inFile1.seekg(0, inFile1.end); int size1 = inFile1.tellg(); inFile1.seekg(0, inFile1.beg); // cout &lt;&lt; &quot;File #1 Size: &quot; &lt;&lt; size1 &lt;&lt; endl; char arr1[size1]; inFile1.read(arr1, sizeof(arr1)); inFile1.close(); inFile2.seekg(0, inFile2.end); int size2 = inFile2.tellg(); inFile2.seekg(0, inFile2.beg); // cout &lt;&lt; &quot;File #2 Size: &quot; &lt;&lt; size2 &lt;&lt; endl; char arr2[size2]; inFile2.read(arr2, sizeof(arr2)); inFile2.close(); outFile.open(&quot;outputFile.dat&quot;, ios::out|ios::app|ios::binary); outFile.write(arr1, sizeof(arr1)); outFile.write(arr2, sizeof(arr2)); for(int count = 0; count &lt; size1; count++) &#123; cout &lt;&lt; arr1[count] &lt;&lt; &quot;&quot;; &#125; for(int count = 0; count &lt; size2; count++) &#123; cout &lt;&lt; arr2[count] &lt;&lt; &quot;&quot;; &#125; cout &lt;&lt; endl; outFile.close(); return 0; &#125;</span><br></pre></td></tr></table></figure>


电流输出

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Madam, Keep an eye on the radar. If it doesn&apos;t look that good for kayak paddling tonight, then the next time which we can rent the kayak is tomorrow noon. But at that time you will have to take care of the pup, and only your darling and I can enjoy the trip. Sis Hi sis, I only deal with loyal ones. Obviously the pup is much more loyal. You and I really see eye to eye on this issue. Enjoy your kayak paddling. &quot;Your Madam&quot;</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

首先，您需要使用vector或者必须在语法上正确定义动态数组。 这是您在C ++中定义动态数组的方式： 由于size1和size2不是常量，并且将在运行时初始化，因此无法声明像char arr1[size1]这样的动态数组，需要指向将如上所述声明的数组的指针。 您也可以在这里了解更多信息。 然后您的write函数将按预期工作，并将两个数组附加到一个名为outfile的二进制文件中。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> char *arr1 = new char[size1]</span><br><span class="line">char *arr2 = new char[size2]</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用Polly断路器处理多种服务的正确方法堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用Polly断路器处理多种服务的正确方法堆栈内存溢出.html" itemprop="url">c使用Polly断路器处理多种服务的正确方法堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Proper way to handle multiple services with polly circuit breaker


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我有一个与数百个HTTP端点进行通信的应用程序。 该应用程序是各种代理。 在使用polly进行测试时，我注意到如果一个端点（例如“ api.endpoint1.com”）失败，则对“ api.endpoint2.com”和“ api.endpoint3.com”的调用也将处于打开/阻止状态州。 这很有意义，因为我仅定义了一个策略，但是建议使用什么方法来处理这种情况，以防止由于另一个存在性能问题而阻止对不相关端点的调用？

我是否创建策略集合，每个端点一个，还是有办法提供某种上下文密钥（即主机名）来将故障范围限定在给定的主机端点上？

我查看了Polly关于上下文密钥的文档 ，看来这些是来回交换数据的方法，而不是我在这里寻找的内容。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var policy = Policy .Handle&lt;TimeoutException&gt;() .CircuitBreaker(1, TimeSpan.FromSeconds(1)); //dynamic, large list of endpoints. var m = new HttpRequestMessage(HttpMethod.Post, &quot;https://api.endpoint1.com&quot;) &#123; Content = new StringContent(&quot;some JSON data here&quot;, Encoding.UTF8,&quot;application/json&quot;) &#125;; policy.Execute(() =&gt; HTTPClientWrapper.PostAsync(message));</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：2 已采纳</strong></p>

是的，最好的选择是为每个端点创建一个单独的策略。 这比对每个主机执行此操作更好，因为端点可能由于特定于该端点的原因（例如，存储过程缓慢）而响应缓慢。 我使用了Dictionary<string, policy>和端点URL作为键。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> if (!_circuitBreakerPolices.ContainsKey(url))</span><br><span class="line">&#123;</span><br><span class="line">    CircuitBreakerPolicy policy = Policy.Handle&lt;Exception&gt;().AdvancedCircuitBreakerAsync(</span><br><span class="line">        onBreak: ...</span><br><span class="line">    );</span><br><span class="line">    _circuitBreakerPolicies.Add(url, policy);</span><br><span class="line">&#125;</span><br><span class="line">await _circuitBreakerPolicies[url].ExecuteAsync(async () =&gt; ... );</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#2 票数：-3</strong></p>

这仍然是实现它的最佳方法吗？ 没有其他替代方案或内置解决方案吗？
</string,>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用GLFW和OpenGL在鼠标单击上画点堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用GLFW和OpenGL在鼠标单击上画点堆栈内存溢出.html" itemprop="url">c使用GLFW和OpenGL在鼠标单击上画点堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Draw point on mouse-click using GLFW & OpenGL?


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
这是我用来获取鼠标单击位置的功能：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void Window::mouseButtonCallback(GLFWwindow * WindowObject, int button, int action, int mods) &#123; double xpos, ypos; if (button == GLFW_MOUSE_BUTTON_RIGHT &amp;&amp; action == GLFW_PRESS) &#123; glfwGetCursorPos(WindowObject, &amp;xpos, &amp;ypos); cout &lt;&lt; &quot; XPOS : &quot; &lt;&lt; xpos &lt;&lt; endl; cout &lt;&lt; &quot; YPOS : &quot; &lt;&lt; ypos &lt;&lt; endl; &#125; if (button == GLFW_MOUSE_BUTTON_RIGHT &amp;&amp; action == GLFW_RELEASE) &#123; cout &lt;&lt; &quot;Mouse Button Released&quot; &lt;&lt; endl; &#125; &#125; glfwSetMouseButtonCallback(this-&gt;WindowObject, mouseButtonCallback);</span><br></pre></td></tr></table></figure>


完整代码：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;GL/glew.h&gt; #include &lt;glfw/glfw3.h&gt; #include &lt;iostream&gt; using namespace std; class Window &#123; private: int screenWidth, screenHeight; const char* WindowName; GLFWwindow* WindowObject; public: Window(); void CreateWindow(); void SetViewPort( int, int, const char* ); void SetBGColor( float, float, float, float ); void SetWindowActive(); bool IsWindowActive(); static void mouseButtonCallback( GLFWwindow* WindowObject, int button, int action, int mods ); &#125;; GLdouble vertex[] = &#123; 0.0f,0.0f &#125;; GLuint VBO; void DrawPoints() &#123; //generate vbo glGenBuffers( 1, &amp;VBO ); //binding vbo glBindBuffer( GL_ARRAY_BUFFER, VBO ); //generating data in vbo glBufferData( GL_ARRAY_BUFFER, sizeof( vertex ), vertex, GL_STATIC_DRAW ); //retrieving data glVertexAttribPointer( 0, 3, GL_DOUBLE, GL_FALSE, 0, 0 ); //enable data for drawing glEnableVertexAttribArray( 0 ); //drawing a point glDrawArrays( GL_POINTS, 0, 1 ); //to increase the size of point glPointSize( 5 ); //to change the color of the point glColor3f( 1, 0, 0 ); //disable data after using glDisableVertexAttribArray( 0 ); &#125; void Window::mouseButtonCallback( GLFWwindow * WindowObject, int button, int action, int mods ) &#123; double xpos, ypos; if( button == GLFW_MOUSE_BUTTON_RIGHT &amp;&amp; action == GLFW_PRESS ) &#123; glfwGetCursorPos( WindowObject, &amp;xpos, &amp;ypos ); cout &lt;&lt; &quot; XPOS : &quot; &lt;&lt; xpos &lt;&lt; endl; cout &lt;&lt; &quot; YPOS : &quot; &lt;&lt; ypos &lt;&lt; endl; //glBegin(GL_POINTS); //glPointSize(5); //glColor4f(1, 0, 0, 1); //glVertex2f(xpos,ypos); //glEnd(); &#125; if( button == GLFW_MOUSE_BUTTON_RIGHT &amp;&amp; action == GLFW_RELEASE ) &#123; cout &lt;&lt; &quot;Mouse Button Released&quot; &lt;&lt; endl; &#125; &#125; Window::Window() &#123; this-&gt;screenWidth = 640; this-&gt;screenHeight = 480; this-&gt;WindowName = &quot;New Window&quot;; glfwInit(); &#125; void Window::SetViewPort( int screenWidth, int screenHeight, const char* WindowName ) &#123; this-&gt;screenHeight = screenHeight; this-&gt;screenWidth = screenWidth; this-&gt;WindowName = WindowName; &#125; void Window::CreateWindow() &#123; this-&gt;WindowObject = glfwCreateWindow( this-&gt;screenWidth, this-&gt;screenHeight, this-&gt;WindowName, NULL, NULL ); // To get co-ordinates of cursor //glfwSetCursorPosCallback(this-&gt;WindowObject, cursorPosCallback); glfwSetMouseButtonCallback( this-&gt;WindowObject, mouseButtonCallback ); if( this-&gt;WindowObject == NULL ) &#123; cout &lt;&lt; stderr &lt;&lt; &quot;Failed to Load the Window&quot;; glfwTerminate(); &#125; glfwMakeContextCurrent( this-&gt;WindowObject ); glewInit(); &#125; void Window::SetBGColor( float R, float G, float B, float A ) &#123; glClear( GL_COLOR_BUFFER_BIT ); glClearColor( R, G, B, A ); &#125; void Window::SetWindowActive() &#123; glfwSwapBuffers( this-&gt;WindowObject ); glfwPollEvents(); &#125; bool Window::IsWindowActive() &#123; if( glfwGetKey( this-&gt;WindowObject, GLFW_KEY_ESCAPE ) == GLFW_PRESS ) &#123; return false; &#125; if( GLFW_PRESS &amp;&amp; glfwWindowShouldClose( this-&gt;WindowObject ) != 0 ) &#123; return false; &#125; return true; &#125; int main() &#123; Window MyGameWindow; MyGameWindow.SetViewPort( 1024, 768, &quot;My Game Window&quot; ); MyGameWindow.CreateWindow(); do &#123; MyGameWindow.SetBGColor( 0.128f, 0.128f, 0.128f, 0.0f ); DrawPoints(); MyGameWindow.SetWindowActive(); &#125; while( MyGameWindow.IsWindowActive() ); return 0; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

使用glfwSetWindowUserPointer将指向Window对象的指针关联到GLFWindow ： 使用glfwGetWindowUserPointer检索静态鼠标按钮回调中的关联指针，并将回调委托给Window方法： （遗憾的是，您必须将void*类型的返回值void*为Window* ，但无法解决。） 在该方法中，可以访问窗口宽度（ this->screenWidth ）和高度（ this->screenHeight ）的属性，并计算与鼠标位置对应的标准化设备坐标。 现在可以更改顶点坐标（ vertex ）：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> void Window::CreateWindow()</span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;WindowObject = glfwCreateWindow(this-&gt;screenWidth, this-&gt;screenHeight,</span><br><span class="line">                                          this-&gt;WindowName, NULL, NULL );</span><br><span class="line"></span><br><span class="line">    glfwSetWindowUserPointer( this-&gt;WindowObject, this ); // &lt;----</span><br><span class="line"></span><br><span class="line">    // [...]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用Emscripten将C文件转换为wasm时出错堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用Emscripten将C文件转换为wasm时出错堆栈内存溢出.html" itemprop="url">c使用Emscripten将C文件转换为wasm时出错堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Error converting c++ file to wasm using emscripten


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
这是本文将.cpp文件转换为.wasm文件的后续问题

我正在尝试在Linux上使用emscripten将c ++文件转换为.wasm。 我遇到了这个错误：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:188:10: error: use of undeclared identifier &apos;__builtin_ia32_readeflags_u32&apos; return __builtin_ia32_readeflags_u32(); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:194:3: error: use of undeclared identifier &apos;__builtin_ia32_writeeflags_u32&apos; __builtin_ia32_writeeflags_u32(__f); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:284:10: error: use of undeclared identifier &apos;__builtin_ia32_crc32qi&apos; return __builtin_ia32_crc32qi(__C, __D); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:305:10: error: use of undeclared identifier &apos;__builtin_ia32_crc32hi&apos; return __builtin_ia32_crc32hi(__C, __D); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:326:10: error: use of undeclared identifier &apos;__builtin_ia32_crc32si&apos; return __builtin_ia32_crc32si(__C, __D); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:354:10: error: use of undeclared identifier &apos;__builtin_ia32_rdpmc&apos; return __builtin_ia32_rdpmc(__A); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:360:10: error: use of undeclared identifier &apos;__builtin_ia32_rdtscp&apos; return __builtin_ia32_rdtscp(__A); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/ia32intrin.h:369:3: error: use of undeclared identifier &apos;__builtin_ia32_wbinvd&apos; __builtin_ia32_wbinvd(); ^ In file included from sealdemo.cpp:1: In file included from SEAL/native/src/seal/seal.h:6: In file included from SEAL/native/src/seal/biguint.h:9: In file included from SEAL/native/src/seal/memorymanager.h:10: In file included from SEAL/native/src/seal/util/defines.h:62: In file included from SEAL/native/src/seal/util/clang.h:18: In file included from /home/maria/emsdk/upstream/lib/clang/10.0.0/include/x86intrin.h:15: In file included from /home/maria/emsdk/upstream/lib/clang/10.0.0/include/immintrin.h:14: /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:33:5: error: use of undeclared identifier &apos;__builtin_ia32_emms&apos;; did you mean &apos;__builtin_isless&apos;? __builtin_ia32_emms(); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:33:5: note: &apos;__builtin_isless&apos; declared here /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:33:25: error: too few arguments to function call, expected 2, have 0 __builtin_ia32_emms(); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:50:19: error: use of undeclared identifier &apos;__builtin_ia32_vec_init_v2si&apos; return (__m64)__builtin_ia32_vec_init_v2si(__i, 0); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:67:12: error: use of undeclared identifier &apos;__builtin_ia32_vec_ext_v2si&apos; return __builtin_ia32_vec_ext_v2si((__v2si)__m, 0); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:129:19: error: use of undeclared identifier &apos;__builtin_ia32_packsswb&apos; return (__m64)__builtin_ia32_packsswb((__v4hi)__m1, (__v4hi)__m2); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:159:19: error: use of undeclared identifier &apos;__builtin_ia32_packssdw&apos; return (__m64)__builtin_ia32_packssdw((__v2si)__m1, (__v2si)__m2); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:189:19: error: use of undeclared identifier &apos;__builtin_ia32_packuswb&apos; return (__m64)__builtin_ia32_packuswb((__v4hi)__m1, (__v4hi)__m2); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:216:19: error: use of undeclared identifier &apos;__builtin_ia32_punpckhbw&apos; return (__m64)__builtin_ia32_punpckhbw((__v8qi)__m1, (__v8qi)__m2); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:239:19: error: use of undeclared identifier &apos;__builtin_ia32_punpckhwd&apos; return (__m64)__builtin_ia32_punpckhwd((__v4hi)__m1, (__v4hi)__m2); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:260:19: error: use of undeclared identifier &apos;__builtin_ia32_punpckhdq&apos; return (__m64)__builtin_ia32_punpckhdq((__v2si)__m1, (__v2si)__m2); ^ /home/maria/emsdk/upstream/lib/clang/10.0.0/include/mmintrin.h:287:19: error: use of undeclared identifier &apos;__builtin_ia32_punpcklbw&apos; return (__m64)__builtin_ia32_punpcklbw((__v8qi)__m1, (__v8qi)__m2); ^ fatal error: too many errors emitted, stopping now [-ferror-limit=] 20 errors generated. shared:ERROR: &apos;/home/maria/emsdk/upstream/bin/clang++ -target wasm32-unknown-emscrip</span><br></pre></td></tr></table></figure>


有人可以帮忙吗

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

在构建WebAssembly时，您不能/不应该包含x86intrin.h 。 看来您需要在没有SEAL_USE_INTRIN情况下进行构建： https : //github.com/microsoft/SEAL/blob/master/native/src/seal/util/clang.h#L18
**===============>>#2 票数：0**

我已经能够使用带有内在函数（ #include <wasm_simd128.h> ）的emscripten将Microsoft SEAL库编译为WebAssembly，但这是可选的。 就其本身而言，工具链从来没有给我这个特定的错误，因为emcmake步骤始终无法找到必要的头文件，并且在没有优化的情况下进行编译。 听起来您可能没有使用适当的emcmake或em++参数。 此外，如果要使用内部函数，则需要在gcc.h和clang.h（位于SEAL / native / src / seal / util /中）内使用一些条件，以便在wasm_simd128.h上使用x86intrin.h 随时检查我的实现和/或构建可在Mac和Linux（Ubuntu）上编译的脚本： https : //github.com/morfix-io/node-seal 或下载npm软件包（如果您只想要一个工作库）： https : //www.npmjs.com/package/node-seal
</wasm_simd128.h>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用C中的while循环计算数组中元素的数量堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用C中的while循环计算数组中元素的数量堆栈内存溢出.html" itemprop="url">c使用C中的while循环计算数组中元素的数量堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Counting number of elements in an array using while loop in C


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt; int main() &#123; int x[] = &#123;22, 8, 87, 76, 45, 43, 34, 13, 51, 15&#125;; int count = 0; while (x[count] != &apos;\0&apos;) &#123; count++; &#125; printf(&quot;%d&quot;, count); return 0; &#125;</span><br></pre></td></tr></table></figure>


我不知道为什么该程序给我输出12，而应该给它10。错误在哪里？ 还有其他方法可以知道元素的数量吗？因为我必须进一步使用它来计算给定数据的中位数。

请任何人帮助我清除这个疑问。 提前致谢。

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：4 已采纳</strong></p>

仅当从字符串文字初始化时才添加NUL。 由于您的数组不包含'\\0' （ 0 ），因此您要读取其末尾，直到碰巧遇到0为止。 这是未定义的行为。 您可以添加零： 就是说，在这里使用哨兵值看起来很奇怪。 通常使用数组的大小。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> char a1[] = &quot;abc&quot;;               // 4 elements: 0x61, 0x62, 0x63, 0x00.</span><br><span class="line">char a2[] = &#123; &apos;a&apos;, &apos;b&apos;, &apos;c&apos; &#125;;   // 3 elements: 0x61, 0x62, 0x63.</span><br><span class="line">char a3[] = &#123; 97, 98, 99 &#125;;      // 3 elements: 0x61, 0x62, 0x63.</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#2 票数：1</strong></p>

int数组不一定是零终止的。 char数组有时是。 但是无论如何，如果您拥有数组本身，而不仅仅是指向数组的指针，则可以通过以下方法获取数组的大小： 请注意，如果您将数组作为参数传递给函数，则此方法将不起作用，因为这样大小信息将在函数中丢失：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size_t const count = sizeof(x) / sizeof(*x);</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#3 票数：0</strong></p>

x[count]!='\\0'条件不正确。 只有在必须处理字符串时才是正确的，在这种情况下， '\\0'代表字符串的结尾，否则，当您处理数组时，必须随身携带一个变量来获取数组的长度。 您可以使用sizeof(count)/sizeof(count[0]);获得此大小sizeof(count)/sizeof(count[0]); 实际上x[count]可以指向内存的任意点， x是原点，并count偏移量，这就是为什么您可以访问count[11]例如的原因。
**===============>>#4 票数：0**

正如您正确指出的那样，数组有10个元素 在元素之间，没有哨点值等于'\\0' 。 因此，由于访问数组外部的内存，循环调用了未定义的行为。 您可以将值等于0的元素附加到数组，例如 在这种情况下，循环 将计算除最后一个元素以外的所有元素。 因此，您需要在循环后增加最后一个元素也要count的变量计数。 或者您可以像这样重写循环 要获取数组中元素的数量，您可以获取其大小，然后将其除以其元素的大小。 例如 要么 甚至喜欢 因为运算符sizeof不评估使用的表达式。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int x[] = &#123;22, 8, 87, 76, 45, 43, 34, 13, 51, 15&#125;;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用AVX2指令向左移128位数字堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用AVX2指令向左移128位数字堆栈内存溢出.html" itemprop="url">c使用AVX2指令向左移128位数字堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-28T00:00:00+00:00">
                2020-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
left shift of 128 bit number using AVX2 instruction


<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我正在尝试在AVX2中向左旋转128位数字。 由于没有直接的方法可以执行此操作，因此我尝试使用左移和右移来完成任务。

这是我的代码的一部分，以执行相同的操作。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">l = 4; r = 4; targetrotate = _mm_set_epi64x (l, r); targetleftrotate = _mm_sllv_epi64 (target, targetrotate);</span><br></pre></td></tr></table></figure>


上面的代码片段将目标向左旋转4。 当我使用示例输入测试上述代码时，我可以看到结果未正确旋转。

这是示例输入和输出

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">input: 01 23 45 67 89 ab cd ef fe dc ba 98 76 54 32 10 obtained output: 10 30 52 74 96 b8 da fc e0 cf ad 8b 69 47 25 03</span><br></pre></td></tr></table></figure>


但是，我期望的输出是

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12 34 56 78 9a bc de f0 ed cb a9 87 65 43 21 00</span><br></pre></td></tr></table></figure>


我知道我做错了。 我想知道我的预期输出是否正确，如果是，我想知道我在这里做错了什么。

任何帮助将不胜感激，并在此先感谢。

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：2 已采纳</strong></p>

我认为您在打印输入和输出时遇到了一个字节序问题。 每个64位半部分中最左边的字节是实际输出中的最低有效字节 ，因此0xfe << 4变为0xe0 ，而f移至更高的字节。 有关更多讨论，请参见显示向量寄存器的约定 。 您的“预期”输出与您首先打印高元素（存储时的最高地址）的值相符。 但这不是你在做什么； 您将按升序分别打印每个字节。 x86是Little-endian。 这与我们在英语中使用的数字系统相冲突，在英语中，我们从左到右读取阿拉伯数字，在左侧是最高的位数值，实际上是人类的大端数字。 有趣的事实：阿拉伯语从右到左阅读，因此对于他们来说，书面数字是“人类的小端”。 （在元素之间，较高的元素位于较高的地址；首先打印较高的元素会使_mm_bslli_si128类的全矢量移位（也称为pslldq在将元素之间的字节左移的方式上很有意义。） 如果使用调试器，则可能在其中进行打印。 如果您使用的是调试打印，请参阅打印__m128i变量 。 顺便说一句，您可以使用_mm_set1_epi64x(4)将相同的值放入向量的两个元素中，而不是使用具有相同值的单独的l和r变量。 在_mm_set内部函数中，高位元素排在第一位 ，与Intel的asm手册中的图相匹配，并且与“左”的语义相匹配，即向左移动位/字节。 （例如，参见英特尔图， _mm_shuffle_epi32的元素编号_mm_shuffle_epi32 ） 顺便说一句，AVX512具有vprolvq旋转功能。 但是，是的，要模拟旋转，您需要SIMD版本(x << n) | x >> (64-n) (x << n) | x >> (64-n) 。 请注意，x86 SIMD移位会使移位计数饱和 ，这与掩盖该计数的标量移位不同。 因此， x >> 64将移出所有位。 如果要支持大于63的循环计数，则可能需要屏蔽。 （ C ++中循环移位（旋转）操作的最佳做 法，但您使用的是内部函数，因此您不必担心C移位计数UB，而不必担心实际的硬件行为。）

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../132/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../132/">132</a><span class="page-number current">133</span><a class="page-number" href="../134/">134</a><span class="space">&hellip;</span><a class="page-number" href="../173/">173</a><a class="extend next" rel="next" href="../134/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="http://code.newban.cn/archives/">
              
                  <span class="site-state-item-count">1724</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a rel="external nofollow" class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a rel="external nofollow" class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
