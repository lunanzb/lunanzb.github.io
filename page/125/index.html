<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客">
<meta property="og:url" content="https://luna.newban.cn/page/125/index.html">
<meta property="og:site_name" content="开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://luna.newban.cn/page/125/">





  <title>开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
  
<a href="https://www.github.com/songjianzaina" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者的博客 – 全栈</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://www.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="http://code.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c使用重复但不同的元素反序列化XML堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c使用重复但不同的元素反序列化XML堆栈内存溢出.html" itemprop="url">c使用重复但不同的元素反序列化XML堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Deserialize XML with repeating (but different) elements



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
已经为我提供了一种我非常努力反序列化的XML格式：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot; ?&gt; &lt;data version=&apos;1&apos;&gt; &lt;id&gt;1&lt;/id&gt; &lt;property name=&apos;firstName&apos;&gt;John&lt;/property&gt; &lt;property name=&apos;lastName&apos;&gt;Smith&lt;/property&gt; &lt;/data&gt;</span><br></pre></td></tr></table></figure>


我的问题是涉及“属性”元素。 我从来不需要处理类似的事情，所以我不确定应该如何构造我的课程。 我通常会选择：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class data &#123; public string id &#123; get; set; &#125; public string firstName &#123; get; set; &#125; public string lastName &#123; get; set; &#125; &#125;</span><br></pre></td></tr></table></figure>


然后像这样反序列化：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var recordSerializer = new XmlSerializer(typeof(data)); var myData = (data)recordSerializer.Deserialize(reader);</span><br></pre></td></tr></table></figure>


我确实尝试创建一个自定义的“属性”类，但是我不知道从那里可以去哪里：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class property &#123; public string name &#123; get; set; &#125; public string value &#123; get; set; &#125; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：1 已采纳</strong></p>

你可以这样做 不使用列表，则必须在xml中添加名称空间以区分属性


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> public class data</span><br><span class="line">&#123;</span><br><span class="line">    public string id &#123; get; set; &#125;</span><br><span class="line"></span><br><span class="line">    [XmlElement(ElementName = &quot;property&quot;)]</span><br><span class="line">    public List&lt;property&gt; lista &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class property</span><br><span class="line">&#123;</span><br><span class="line">    [XmlAttribute(&quot;name&quot;)]</span><br><span class="line">    public string name &#123; get; set; &#125;</span><br><span class="line">    [XmlText( typeof(string))]</span><br><span class="line">    public string value &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#2 票数：0</strong></p>

给您的数据类一个propertyclass的数组


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> public class data</span><br><span class="line">&#123;</span><br><span class="line">    public string id &#123; get; set; &#125;</span><br><span class="line"></span><br><span class="line">    [XmlElement(&quot;property&quot;)]</span><br><span class="line">    public property[] Properties &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c保存XML文件时UWPCSystemUnauthorizedAccessException堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c保存XML文件时UWPCSystemUnauthorizedAccessException堆栈内存溢出.html" itemprop="url">c保存XML文件时UWPCSystemUnauthorizedAccessException堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
UWP C# System.UnauthorizedAccessException when saving XML file



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我正在尝试将一些数据写入一个已经存在的XML文件，如下所示：


我已经尝试过给予所有人完全许可。 这没有用。


https://imgur.com/a/nFxth6G


我正在尝试写入的XML文件：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt; &lt;list&gt; &lt;story&gt; &lt;content&gt; Example story 12345678 &lt;/content&gt; &lt;score&gt; 10 &lt;/score&gt; &lt;/story&gt; &lt;/list&gt;</span><br></pre></td></tr></table></figure>


我用于更新XML文件的代码：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">XmlDocument doc = new XmlDocument(); doc.Load(@&quot;Scorelist.xml&quot;); XmlNode mnodeMain = doc.CreateNode(XmlNodeType.Element, &quot;Story&quot;, null); XmlNode nodeStory = doc.CreateElement(&quot;Content&quot;); nodeStory.InnerText = txt_verhaaldisplay.Text; XmlNode nodeScore = doc.CreateElement(&quot;Score&quot;); nodeScore.InnerText = txt_ratinginput.Text; mnodeMain.AppendChild(nodeStory); mnodeMain.AppendChild(nodeScore); doc.DocumentElement.AppendChild(mnodeMain); doc.Save(@&quot;Scorelist.xml&quot;); &lt;--- This is where I am getting an error</span><br></pre></td></tr></table></figure>


这是我收到的错误消息：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.UnauthorizedAccessException: &apos;Access to the path&apos;D:\Programs\Story Generator\bin\x86\Debug\AppX\Scorelist.xml&apos; is denied.&apos;</span><br></pre></td></tr></table></figure>


我不确定我在做什么错。 我对该文件拥有完全许可，这可能是什么？


提前致谢！


<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

在UWP中，您无法写入应用程序的安装文件夹。 这是为了确保应用程序文件夹的完整性，并允许应用程序的增量更新。 要解决此问题，请将文件复制到本地appdata文件夹，然后可以在那里进行更新。 https://docs.microsoft.com/zh-CN/windows/uwp/files/file-access-permissions


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c修改DACL以防止所有人在没有调试特权的情况下杀死进程堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c修改DACL以防止所有人在没有调试特权的情况下杀死进程堆栈内存溢出.html" itemprop="url">c修改DACL以防止所有人在没有调试特权的情况下杀死进程堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Modify DACL to prevent everybody kill process without Debug Priveleges



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我有一些编写的代码。 我需要在Windows 10中修改DACL （安全描述符）以防止在没有用户Debug Privilege的情况下终止 进程 。 我该怎么办？ 我在互联网算法上学习，为此寻找了一些功能，但是进程仍然关闭，没有任何问题。 我尝试了很多次调试，代码可以正常运行，但没有错误。


我应该如何解决这个问题？ 对于下面的示例，i为拒绝的PROCESS_TERMINATE添加ACE。 正确的方法吗？


还建议我如何检查。 我知道我将获得权限被拒绝的MessageBox，是吗？


我的代码（已更新ps）：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt; #include &lt;Windows.h&gt; PSECURITY_DESCRIPTOR GetProcessSecurityDescriptor(HANDLE processHandle, DWORD &amp;buffSizeNeeded); void SecurityDescriptorModifier(HANDLE hProcess); int main() &#123; DWORD pID; std::cin &gt;&gt; pID; HANDLE processHandle = OpenProcess(PROCESS_ALL_ACCESS, false, pID); SecurityDescriptorModifier(processHandle); HANDLE pHandle = OpenProcess(PROCESS_TERMINATE, false, pID); return 0; &#125; void SecurityDescriptorModifier(HANDLE hProcess) &#123; DWORD SIDLength = 0; PSID SID; PACL pACL; PACL pNewAcl; BOOL bDaclExist; BOOL bDaclPresent; PSECURITY_DESCRIPTOR pSecurityDescriptor; PSECURITY_DESCRIPTOR pSecurityDescriptorNew; ACL_SIZE_INFORMATION aclSizeInfo; DWORD dwNewAclSize; ACCESS_ALLOWED_ACE* pACE; PVOID pTempAce; DWORD buffSizeNeeded = -1; // &quot;everyone&quot; group //CreateWellKnownSid(WinWorldSid, NULL, NULL, &amp;SIDLength); // Allocate enough memory for the largest possible SID. SIDLength = SECURITY_MAX_SID_SIZE; if (!(SID = LocalAlloc(LMEM_FIXED, SIDLength))) &#123; fprintf(stderr, &quot;Could not allocate memory.\n&quot;); exit(1); &#125; //SID = new byte[SECURITY_MAX_SID_SIZE]; if (!CreateWellKnownSid(WinWorldSid, NULL, SID, &amp;SIDLength)) &#123; fprintf(stderr, &quot;CreateWellKnownSid Error %u&quot;, GetLastError()); LocalFree(SID); &#125; pSecurityDescriptor = GetProcessSecurityDescriptor(hProcess, buffSizeNeeded); BOOL executionResult = GetSecurityDescriptorDacl(pSecurityDescriptor, &amp;bDaclPresent, &amp;pACL, &amp;bDaclExist); if(!executionResult) &#123; fprintf(stderr, &quot;GetSecurityDescriptorDacl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; pSecurityDescriptorNew = (PSECURITY_DESCRIPTOR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, buffSizeNeeded); if (pSecurityDescriptorNew == NULL) exit(1); else printf(&quot;Heap allocated for psdNew!\n&quot;); // Create a new security descriptor if (!InitializeSecurityDescriptor(pSecurityDescriptorNew, SECURITY_DESCRIPTOR_REVISION)) &#123; fprintf(stderr, &quot;InitializeSecurityDescriptor() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; // Obtain the DACL from the security descriptor if (!GetSecurityDescriptorDacl(pSecurityDescriptor, &amp;bDaclPresent, &amp;pACL, &amp;bDaclExist)) &#123; fprintf(stderr, &quot;GetSecurityDescriptorDacl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; // Initialize ZeroMemory(&amp;aclSizeInfo, sizeof(ACL_SIZE_INFORMATION)); aclSizeInfo.AclBytesInUse = sizeof(ACL); // Call only if NULL DACL if (pACL != NULL) &#123; // Determine the size of the ACL information if (!GetAclInformation(pACL, (LPVOID)&amp; aclSizeInfo, sizeof(ACL_SIZE_INFORMATION), AclSizeInformation)) &#123; fprintf(stderr, &quot;GetAclInformation() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; &#125; // Compute the size of the new ACL dwNewAclSize = aclSizeInfo.AclBytesInUse + sizeof(ACCESS_DENIED_ACE) + GetLengthSid(SID) - sizeof(DWORD); // Allocate buffer for the new ACL pNewAcl = (PACL)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwNewAclSize); if (pNewAcl == NULL) exit(1); // Initialize the new ACL if (!InitializeAcl(pNewAcl, dwNewAclSize, ACL_REVISION)) &#123; fprintf(stderr, &quot;InitializeAcl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; static const DWORD dwPoison = PROCESS_TERMINATE; BOOL bResult = AddAccessDeniedAce(pNewAcl, ACL_REVISION, dwPoison, SID); if (FALSE == bResult) &#123; printf(&quot;AddAccessDenied Error %d\n&quot;, GetLastError()); &#125; // If DACL is present, copy it to a new DACL if (!bDaclPresent) &#123; // Copy the ACEs to the new ACL. if (aclSizeInfo.AceCount) &#123; for (int i = 0; i &lt; aclSizeInfo.AceCount; i++) &#123; // Get an ACE. if (!GetAce(pACL, i, &amp;pTempAce)) &#123; fprintf(stderr, &quot;GetAce() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else fprintf(stderr, &quot;GetAce working\n&quot;); // Add the ACE to the new ACL. if (!AddAce(pNewAcl, ACL_REVISION, MAXDWORD, pTempAce, ((PACE_HEADER)pTempAce)-&gt;AceSize)) &#123; fprintf(stderr, &quot;AddAce() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else fprintf(stderr, &quot;AddAce() is working!\n&quot;); &#125; &#125; &#125; if (!SetSecurityDescriptorDacl(pSecurityDescriptorNew, TRUE, pNewAcl, FALSE)) &#123; printf(&quot;SetSecurityDescriptorDacl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else printf(&quot;SetSecurityDescriptorDacl() is working!\n&quot;); // Set the new security descriptor for the window station if (!SetKernelObjectSecurity(hProcess, DACL_SECURITY_INFORMATION, pSecurityDescriptorNew)) &#123; printf(&quot;SetUserObjectSecurity() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else printf(&quot;SetUserObjectSecurity() is working!\n&quot;); &#125; PSECURITY_DESCRIPTOR GetProcessSecurityDescriptor(HANDLE processHandle, DWORD &amp;buffSizeNeeded) &#123; PSECURITY_DESCRIPTOR pSD = new byte[0]; SECURITY_INFORMATION si = DACL_SECURITY_INFORMATION; // To understand actual needed size for pSD // GetKernelObject, what diff? GetKernelObjectSecurity(processHandle, si, pSD, 0, &amp;buffSizeNeeded); if (buffSizeNeeded &lt;= 0) &#123; fprintf(stderr, &quot;:GetKernelObjectSecurity ERROR: %u\n&quot;, GetLastError()); exit(1); &#125; pSD = (PSECURITY_DESCRIPTOR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, buffSizeNeeded); if (pSD == NULL) exit(1); else printf(&quot;Heap allocated for psdNew!\n&quot;); //Allocate Memory &amp; get DACL if (!GetKernelObjectSecurity(processHandle, si, pSD, buffSizeNeeded, &amp;buffSizeNeeded)) &#123; fprintf(stderr, &quot;:GetKernelObjectSecurity(With Alloc) ERROR: %u\n&quot;, GetLastError()); exit(1); &#125; return pSD; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c修改DACL以防止每个人都在没有DebugPrivelege的情况下杀死进程保留堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c修改DACL以防止每个人都在没有DebugPrivelege的情况下杀死进程保留堆栈内存溢出.html" itemprop="url">c修改DACL以防止每个人都在没有DebugPrivelege的情况下杀死进程保留堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Modify DACL to prevent everybody kill process without Debug Privelege [on hold]



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我有一些编写的代码。 我需要在Windows 10中修改DACL （安全描述符）以防止在没有用户Debug Privilege的情况下终止 进程 。


我的代码不起作用，但没有任何错误。 :(


还建议我如何检查。 我知道我将获得权限被拒绝的MessageBox，是吗？


我的代码：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt; #include &lt;Windows.h&gt; PSECURITY_DESCRIPTOR GetProcessSecurityDescriptor(HANDLE processHandle, DWORD &amp;buffSizeNeeded); void SecurityDescriptorModifier(HANDLE hProcess); int main() &#123; DWORD pID; std::cin &gt;&gt; pID; HANDLE processHandle = OpenProcess(PROCESS_ALL_ACCESS, false, pID); SecurityDescriptorModifier(processHandle); HANDLE pHandle = OpenProcess(PROCESS_TERMINATE, false, pID); return 0; &#125; void SecurityDescriptorModifier(HANDLE hProcess) &#123; DWORD SIDLength = 0; PSID SID; PACL pACL; PACL pNewAcl; BOOL bDaclExist; BOOL bDaclPresent; PSECURITY_DESCRIPTOR pSecurityDescriptor; PSECURITY_DESCRIPTOR pSecurityDescriptorNew; ACL_SIZE_INFORMATION aclSizeInfo; DWORD dwNewAclSize; ACCESS_ALLOWED_ACE* pACE; PVOID pTempAce; DWORD buffSizeNeeded = -1; // &quot;everyone&quot; group //CreateWellKnownSid(WinWorldSid, NULL, NULL, &amp;SIDLength); // Allocate enough memory for the largest possible SID. SIDLength = SECURITY_MAX_SID_SIZE; if (!(SID = LocalAlloc(LMEM_FIXED, SIDLength))) &#123; fprintf(stderr, &quot;Could not allocate memory.\n&quot;); exit(1); &#125; //SID = new byte[SECURITY_MAX_SID_SIZE]; if (!CreateWellKnownSid(WinWorldSid, NULL, SID, &amp;SIDLength)) &#123; fprintf(stderr, &quot;CreateWellKnownSid Error %u&quot;, GetLastError()); LocalFree(SID); &#125; pSecurityDescriptor = GetProcessSecurityDescriptor(hProcess, buffSizeNeeded); BOOL executionResult = GetSecurityDescriptorDacl(pSecurityDescriptor, &amp;bDaclPresent, &amp;pACL, &amp;bDaclExist); if(!executionResult) &#123; fprintf(stderr, &quot;GetSecurityDescriptorDacl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; pSecurityDescriptorNew = (PSECURITY_DESCRIPTOR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, buffSizeNeeded); if (pSecurityDescriptorNew == NULL) exit(1); else printf(&quot;Heap allocated for psdNew!\n&quot;); // Create a new security descriptor if (!InitializeSecurityDescriptor(pSecurityDescriptorNew, SECURITY_DESCRIPTOR_REVISION)) &#123; fprintf(stderr, &quot;InitializeSecurityDescriptor() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; // Obtain the DACL from the security descriptor if (!GetSecurityDescriptorDacl(pSecurityDescriptor, &amp;bDaclPresent, &amp;pACL, &amp;bDaclExist)) &#123; fprintf(stderr, &quot;GetSecurityDescriptorDacl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; // Initialize ZeroMemory(&amp;aclSizeInfo, sizeof(ACL_SIZE_INFORMATION)); aclSizeInfo.AclBytesInUse = sizeof(ACL); // Call only if NULL DACL if (pACL != NULL) &#123; // Determine the size of the ACL information if (!GetAclInformation(pACL, (LPVOID)&amp; aclSizeInfo, sizeof(ACL_SIZE_INFORMATION), AclSizeInformation)) &#123; fprintf(stderr, &quot;GetAclInformation() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; &#125; // Compute the size of the new ACL dwNewAclSize = aclSizeInfo.AclBytesInUse + sizeof(ACCESS_DENIED_ACE) + GetLengthSid(SID) - sizeof(DWORD); // Allocate buffer for the new ACL pNewAcl = (PACL)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwNewAclSize); if (pNewAcl == NULL) exit(1); // Initialize the new ACL if (!InitializeAcl(pNewAcl, dwNewAclSize, ACL_REVISION)) &#123; fprintf(stderr, &quot;InitializeAcl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; // If DACL is present, copy it to a new DACL if (!bDaclPresent) &#123; // Copy the ACEs to the new ACL. if (aclSizeInfo.AceCount) &#123; for (int i = 0; i &lt; aclSizeInfo.AceCount; i++) &#123; // Get an ACE. if (!GetAce(pACL, i, &amp;pTempAce)) &#123; fprintf(stderr, &quot;GetAce() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else fprintf(stderr, &quot;GetAce working\n&quot;); // Add the ACE to the new ACL. if (!AddAce(pNewAcl, ACL_REVISION, MAXDWORD, pTempAce, ((PACE_HEADER)pTempAce)-&gt;AceSize)) &#123; fprintf(stderr, &quot;AddAce() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else fprintf(stderr, &quot;AddAce() is working!\n&quot;); &#125; &#125; &#125; static const DWORD dwPoison = /*READ_CONTROL |*/ WRITE_DAC | WRITE_OWNER | PROCESS_CREATE_PROCESS | PROCESS_CREATE_THREAD | PROCESS_DUP_HANDLE | PROCESS_QUERY_INFORMATION | PROCESS_SET_QUOTA | PROCESS_SET_INFORMATION | PROCESS_VM_OPERATION | PROCESS_VM_READ | PROCESS_VM_WRITE | // To protected process PROCESS_SUSPEND_RESUME | PROCESS_TERMINATE; BOOL bResult = AddAccessDeniedAce(pNewAcl, ACL_REVISION, dwPoison, SID); if (FALSE == bResult) &#123; printf(&quot;AddAccessDenied Error %d\n&quot;, GetLastError()); &#125; if (!SetSecurityDescriptorDacl(pSecurityDescriptorNew, TRUE, pNewAcl, FALSE)) &#123; printf(&quot;SetSecurityDescriptorDacl() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else printf(&quot;SetSecurityDescriptorDacl() is working!\n&quot;); // Set the new security descriptor for the window station if (!SetKernelObjectSecurity(hProcess, DACL_SECURITY_INFORMATION, pSecurityDescriptorNew)) &#123; printf(&quot;SetUserObjectSecurity() failed, error %d\n&quot;, GetLastError()); exit(1); &#125; else printf(&quot;SetUserObjectSecurity() is working!\n&quot;); &#125; PSECURITY_DESCRIPTOR GetProcessSecurityDescriptor(HANDLE processHandle, DWORD &amp;buffSizeNeeded) &#123; PSECURITY_DESCRIPTOR pSD = new byte[0]; SECURITY_INFORMATION si = DACL_SECURITY_INFORMATION; // To understand actual needed size for pSD // GetKernelObject, what diff? GetKernelObjectSecurity(processHandle, si, pSD, 0, &amp;buffSizeNeeded); if (buffSizeNeeded &lt;= 0) &#123; fprintf(stderr, &quot;:GetKernelObjectSecurity ERROR: %u\n&quot;, GetLastError()); exit(1); &#125; pSD = (PSECURITY_DESCRIPTOR)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, buffSizeNeeded); if (pSD == NULL) exit(1); else printf(&quot;Heap allocated for psdNew!\n&quot;); //Allocate Memory &amp; get DACL if (!GetKernelObjectSecurity(processHandle, si, pSD, buffSizeNeeded, &amp;buffSizeNeeded)) &#123; fprintf(stderr, &quot;:GetKernelObjectSecurity(With Alloc) ERROR: %u\n&quot;, GetLastError()); exit(1); &#125; return pSD; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c值不能为空参数名称元素堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c值不能为空参数名称元素堆栈内存溢出.html" itemprop="url">c值不能为空参数名称元素堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Value cannot be null. Parameter name: element



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我正在尝试从XML信用报告中提取数据。 我需要清除某些条目的功能。


这是我用来尝试获取值列表的代码。


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var trades = from x in xmlStr.Descendants(&quot;USTrade&quot;) where (int) x.Element(&quot;BalanceAmount&quot;) &gt; 0 select (int)x.Element(&quot;ScheduledPaymentAmount&quot;);</span><br></pre></td></tr></table></figure>


示例数据如下所示：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;USTrade&gt; &lt;ExpandedDataDimensionsReturned code=&quot;T&quot; description=&quot;Enhanced Trade with All 6.0 Trade Fields&quot; /&gt; &lt;CreditorId&gt; &lt;CustomerNumber&gt;801ON00630&lt;/CustomerNumber&gt; &lt;Name&gt;BK OF AMER&lt;/Name&gt; &lt;Industry code=&quot;ON&quot; description=&quot;National Credit Card Cos.&quot; /&gt; &lt;/CreditorId&gt; &lt;DateReported format=&quot;MM/CCYY&quot;&gt;07/2019&lt;/DateReported&gt; &lt;DateOpened format=&quot;MM/CCYY&quot;&gt;12/2007&lt;/DateOpened&gt; &lt;AccountNumber&gt;4509128960678&lt;/AccountNumber&gt; &lt;HighCreditAmount&gt;0020500&lt;/HighCreditAmount&gt; &lt;BalanceAmount&gt;0000076&lt;/BalanceAmount&gt; &lt;PortfolioType code=&quot;R&quot; description=&quot;Revolving or Option (open-end account)&quot; /&gt; &lt;Status code=&quot;1&quot; description=&quot;Pays Acct As Agreed&quot; /&gt; &lt;MonthsReviewed&gt;21&lt;/MonthsReviewed&gt; &lt;AccountDesignator code=&quot;I&quot; description=&quot;Individual&quot; /&gt; &lt;DateOfLastActivity format=&quot;MM/CCYY&quot;&gt;07/2019&lt;/DateOfLastActivity&gt; &lt;ScheduledPaymentAmount&gt;0000015&lt;/ScheduledPaymentAmount&gt; &lt;UpdateIndicator code=&quot;*&quot; description=&quot;Tape&quot; /&gt; &lt;Narratives&gt; &lt;Narrative code=&quot;FE&quot; description=&quot;Credit Card&quot; /&gt; &lt;Narrative code=&quot;AZ&quot; description=&quot;Amount In H/C Column Is Credit Limit&quot; /&gt; &lt;/Narratives&gt; &lt;ExpandedCreditorId&gt; &lt;Name&gt;BANK OF AMERICA&lt;/Name&gt; &lt;/ExpandedCreditorId&gt; &lt;ExpandedDateReported format=&quot;MM/CCYY&quot;&gt;07/2019&lt;/ExpandedDateReported&gt; &lt;ExpandedDateOpened format=&quot;MM/CCYY&quot;&gt;12/2007&lt;/ExpandedDateOpened&gt; &lt;ExpandedCreditLimit&gt;000020500&lt;/ExpandedCreditLimit&gt; &lt;ExpandedBalanceAmount&gt;000000076&lt;/ExpandedBalanceAmount&gt; &lt;ExpandedPortfolioType code=&quot;R&quot; description=&quot;Revolving or Option (open-end account)&quot; /&gt; &lt;ExpandedStatus code=&quot;1&quot; description=&quot;Pays Acct As Agreed&quot; /&gt; &lt;ExpandedNarratives&gt; &lt;Narrative code=&quot;FE&quot; description=&quot;Credit Card&quot; /&gt; &lt;/ExpandedNarratives&gt; &lt;ExpandedScheduledPaymentAmount&gt;000000015&lt;/ExpandedScheduledPaymentAmount&gt; &lt;/USTrade&gt; &lt;USTrade&gt; &lt;ExpandedDataDimensionsReturned code=&quot;T&quot; description=&quot;Enhanced Trade with All 6.0 Trade Fields&quot; /&gt; &lt;CreditorId&gt; &lt;CustomerNumber&gt;801ON00630&lt;/CustomerNumber&gt; &lt;Name&gt;BK OF AMER&lt;/Name&gt; &lt;Industry code=&quot;ON&quot; description=&quot;National Credit Card Cos.&quot; /&gt; &lt;/CreditorId&gt; &lt;DateReported format=&quot;MM/CCYY&quot;&gt;10/2018&lt;/DateReported&gt; &lt;DateOpened format=&quot;MM/CCYY&quot;&gt;12/2007&lt;/DateOpened&gt; &lt;AccountNumber&gt;4509128960565&lt;/AccountNumber&gt; &lt;Status code=&quot;B&quot; description=&quot;Lost or Stolen Card&quot; /&gt; &lt;DateOfLastActivity format=&quot;MM/CCYY&quot;&gt;10/2018&lt;/DateOfLastActivity&gt; &lt;UpdateIndicator code=&quot;*&quot; description=&quot;Tape&quot; /&gt; &lt;Narratives&gt; &lt;Narrative code=&quot;FE&quot; description=&quot;Credit Card&quot; /&gt; &lt;/Narratives&gt; &lt;ExpandedCreditorId&gt; &lt;Name&gt;BANK OF AMERICA&lt;/Name&gt; &lt;/ExpandedCreditorId&gt; &lt;ExpandedDateReported format=&quot;MM/CCYY&quot;&gt;10/2018&lt;/ExpandedDateReported&gt; &lt;ExpandedDateOpened format=&quot;MM/CCYY&quot;&gt;12/2007&lt;/ExpandedDateOpened&gt; &lt;ExpandedStatus code=&quot;B&quot; description=&quot;Lost or Stolen Card&quot; /&gt; &lt;ExpandedNarratives&gt; &lt;Narrative code=&quot;FE&quot; description=&quot;Credit Card&quot; /&gt; &lt;/ExpandedNarratives&gt; &lt;/USTrade&gt;</span><br></pre></td></tr></table></figure>


我不断收到“值不能为空。参数名称：元素”错误。


当我通过数据进行挖掘时，我看到一些USTrades没有我要搜索的元素-会引起问题吗？ 如果是这样，我该如何处理？ （即，UsTrade没有ScheduledPaymentAmount元素）


谢谢


<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

您可以修改查询以仅搜索具有ScheduledPaymentAmount元素的对象。 例如


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var trades = from x in xmlStr.Descendants(&quot;USTrade&quot;)</span><br><span class="line">                   where (int) x.Element(&quot;BalanceAmount&quot;) &gt; 0 </span><br><span class="line">                   and x.Element(&quot;ScheduledPaymentAmount&quot;) != null</span><br><span class="line">                   select  (int)x.Element(&quot;ScheduledPaymentAmount&quot;);</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#2 票数：0</strong></p>

问题似乎源于0000值。 我最终创建了一个新类，并将BalanceAmount和ScheduledPaymentAmount添加为属性。 然后我做了： 普雷斯托，一切都很好。 从长远来看，这样做效果更好，因为我最终希望获得更多的价值。


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> var trades = (from x in xmlStr.Descendants(&quot;USTrade&quot;)</span><br><span class="line">             where x.Element(&quot;BalanceAmount&quot;) != null</span><br><span class="line">                   &amp; x.Element(&quot;ScheduledPaymentAmount&quot;) != null</span><br><span class="line">             select new USTrade</span><br><span class="line">             &#123;</span><br><span class="line">                 BalanceAmount = (int) x.Element(&quot;BalanceAmount&quot;) ,</span><br><span class="line">                 ScheduledPaymentAmount = (int)x.Element(&quot;ScheduledPaymentAmount&quot;)</span><br><span class="line">             &#125;).ToList();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">monthlySum = (from y in trades</span><br><span class="line">    where y.BalanceAmount &gt; 0</span><br><span class="line">    select y.ScheduledPaymentAmount).Sum();</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c在Matlab中读取NETSystemDataDataTable的行堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c在Matlab中读取NETSystemDataDataTable的行堆栈内存溢出.html" itemprop="url">c在Matlab中读取NETSystemDataDataTable的行堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Read rows of .NET System.Data.DataTable in Matlab



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我已经在MATLAB 2018b中使用了.NET框架库来执行某些任务，这些任务最终使我返回了一个简单的System.Data.DataTable对象。 我想知道如何读取文件的单行，甚至将其打印到.csv文件，等等。 我无法对返回的DataTable做任何事情。


这是返回的DataTable的输出：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">retdata = DataTable[] with properties: Length: 1 LongLength: 1 Rank: 1 SyncRoot: [1×1 System.Data.DataTable[]] IsReadOnly: 0 IsFixedSize: 1 IsSynchronized: 0</span><br></pre></td></tr></table></figure>


关于此返回的对象，我唯一可以调查的是：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; retdata(1) ans = DataTable with properties: CaseSensitive: 0 IsInitialized: 1 RemotingFormat: Xml ChildRelations: [1×1 System.Data.DataRelationCollection+DataTableRelationCollection] Columns: [1×1 System.Data.DataColumnCollection] Constraints: [1×1 System.Data.ConstraintCollection] DataSet: [1×1 System.Data.DataSet] DefaultView: [1×1 System.Data.DataView] DisplayExpression: [1×1 System.String] ExtendedProperties: [1×1 System.Data.PropertyCollection] HasErrors: 0 Locale: [1×1 System.Globalization.CultureInfo] MinimumCapacity: 50 ParentRelations: [1×1 System.Data.DataRelationCollection+DataTableRelationCollection] PrimaryKey: [1×1 System.Data.DataColumn[]] Rows: [1×1 System.Data.DataRowCollection] TableName: [1×1 System.String] Namespace: [1×1 System.String] Prefix: [1×1 System.String] Site: [] Container: [] DesignMode: 0</span><br></pre></td></tr></table></figure>


我有一个C＃代码，该代码使用retdata[0].Rows[i]["Start Date"]在for循环中读取数据行。 我想用MATLAB做同样的事情。 谢谢。


<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c在ListView之间添加一个gab堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c在ListView之间添加一个gab堆栈内存溢出.html" itemprop="url">c在ListView之间添加一个gab堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Adding a gab in between the ListView



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我不知道如何在列表元素之间添加间隙，因此前三个保持在顶部，而另两个保持在滑出栏的底部。


我听说过有关在元素之间添加框视图的内容，但是这是否会使它在其他设备和操作系统上看起来有所不同？


这是代码，我使用的是常规的主要详细信息页面，其中包含一些稍作修改的元素


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt; &lt;ContentPage xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot; xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot; xmlns:d=&quot;http://xamarin.com/schemas/2014/forms/design&quot; xmlns:mc=&quot;http://schemas.openxmlformats.org/markup- compatibility/2006&quot; mc:Ignorable=&quot;d&quot; x:Class=&quot;StudyBuddyApp.Components.MainPageMaster&quot; Title=&quot;Master&quot;&gt; &lt;StackLayout&gt; &lt;ListView x:Name=&quot;MenuItemsListView&quot; SeparatorVisibility=&quot;None&quot; HasUnevenRows=&quot;true&quot; ItemsSource=&quot;&#123;Binding MenuItems&#125;&quot;&gt; &lt;d:ListView.ItemsSource&gt; &lt;x:Array Type=&quot;&#123;x:Type x:String&#125;&quot;&gt; &lt;x:String&gt;Profile&lt;/x:String&gt; &lt;x:String&gt;Forums&lt;/x:String&gt; &lt;x:String&gt;Find Buddy&lt;/x:String&gt; &lt;!---I want a gap in between these two list items---&gt; &lt;x:String&gt;Help and Settings&lt;/x:String&gt; &lt;x:String&gt;Sign Out&lt;/x:String&gt; &lt;/x:Array&gt; &lt;/d:ListView.ItemsSource&gt; &lt;ListView.Header&gt; &lt;Grid BackgroundColor=&quot;#660066&quot;&gt; &lt;Grid.ColumnDefinitions&gt; &lt;ColumnDefinition Width=&quot;10&quot;/&gt; &lt;ColumnDefinition Width=&quot;*&quot;/&gt; &lt;ColumnDefinition Width=&quot;10&quot;/&gt; &lt;/Grid.ColumnDefinitions&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&quot;30&quot;/&gt; &lt;RowDefinition Height=&quot;80&quot;/&gt; &lt;RowDefinition Height=&quot;Auto&quot;/&gt; &lt;RowDefinition Height=&quot;10&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Label Grid.Column=&quot;1&quot; Grid.Row=&quot;2&quot; FontSize=&quot;Large&quot; TextColor=&quot;White&quot; Text=&quot;StudyBuddy&quot; Style=&quot;&#123;DynamicResource SubtitleStyle&#125;&quot;/&gt; &lt;/Grid&gt; &lt;/ListView.Header&gt; &lt;ListView.ItemTemplate&gt; &lt;DataTemplate&gt; &lt;ViewCell&gt; &lt;StackLayout Padding=&quot;15,10&quot; HorizontalOptions=&quot;FillAndExpand&quot;&gt; &lt;Label VerticalOptions=&quot;FillAndExpand&quot; VerticalTextAlignment=&quot;Center&quot; Text=&quot;&#123;Binding Title&#125;&quot; d:Text=&quot;&#123;Binding .&#125;&quot; FontSize=&quot;24&quot;/&gt; &lt;/StackLayout&gt; &lt;/ViewCell&gt; &lt;/DataTemplate&gt; &lt;/ListView.ItemTemplate&gt; &lt;/ListView&gt; &lt;/StackLayout&gt; &lt;/ContentPage&gt;</span><br></pre></td></tr></table></figure>

<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c关闭默认情况下从aspnet获取的localhost地址堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c关闭默认情况下从aspnet获取的localhost地址堆栈内存溢出.html" itemprop="url">c关闭默认情况下从aspnet获取的localhost地址堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
Shut down localhost address which is taken from asp.net by default



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
在Windows 10上，当我运行http://localhost ，它将打开一些asp.net项目。


我该如何关闭？ 因为我需要启动wamp服务器，但是该地址已经被asp.net占用


抱歉，这是一个虚拟的问题，但是我不知道该如何解决


<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：1 已采纳</strong></p>

打开IIS，然后单击“停止”按钮（在右侧的“操作/管理服务器”下）。 然后启动WAMP。


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c具有Cuda的LibTorchC引发异常堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c具有Cuda的LibTorchC引发异常堆栈内存溢出.html" itemprop="url">c具有Cuda的LibTorchC引发异常堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
LibTorch(C++) with Cuda is raising an exception



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我正在尝试使用Cuda 10.1和Windows 10使用LibTorch 1.3和C ++创建NN。对于构建，我正在使用Visual Studio 2019。


到目前为止，我已经在运行的CPU上尝试了基本示例和MNIST示例 。 但是我不能用CUDA运行它。 我想，因为它描述的移动模式GPU 在这里 ，但它不工作。


要将模型移至GPU内存，可以编写model.to（at :: kCUDA）;。 通过调用tensor.to（at :: kCUDA），确保模型的输入也位于CUDA内存中，这将在CUDA内存中返回新的张量。


所以我尝试了简单


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int main()&#123; auto net = std::make_shared&lt;Net&gt;(); net-&gt;to(torch::kCUDA); //crashes here &#125;</span><br></pre></td></tr></table></figure>


然后我尝试将简单的Tensors移到gpu内存，但它也崩溃了。


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;torch/torch.h&gt; int main() &#123; torch::Tensor a = torch::ones(&#123; 2, 2 &#125;, torch::requires_grad()); torch::Tensor b = torch::randn(&#123; 2, 2 &#125;); a.to(torch::kCUDA); //Here it crashes b.to(torch::kCUDA); // auto c = a + b; &#125;</span><br></pre></td></tr></table></figure>


我得到：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception thrown at 0x00007FFB8263A839 in Resnet50.exe: Microsoft C++ exception: c10::Error at memory location 0x000000E574979F30. Unhandled exception at 0x00007FFB8263A839 in Resnet50.exe: Microsoft C++ exception: c10::Error at memory location 0x000000E574979F30.</span><br></pre></td></tr></table></figure>


在调试模式下，它指向KernelBase.dll以


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auto operator()(Parameters... args) -&gt; decltype(std::declval&lt;FuncType&gt;()(std::forward&lt;Parameters&gt;(args)...)) &#123; return kernel_func_(std::forward&lt;Parameters&gt;(args)...); &#125;</span><br></pre></td></tr></table></figure>


使用torch::cuda::is_available()可以找到cuda设备。


我在例外方面没有太多经验。


<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

嗨，我有同样的问题。 我已经通过安装libtorch 9.2版解决了它。 我已经从这里https://pytorch.org/ Cuda toolkit 9.2和cudnn 9.2下载了发行版本。 我正在使用Visual Studio 2017。 如果您有其他cuda版本，建议从控制面板中卸载。 Cuda工具包https://developer.nvidia.com/cuda-92-download-archive?target_os=Windows&target_arch=x86_64&target_version=10 在Windows上安装cudnn https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#install-windows我的版本为cudnn-9.2-windows10-x64-v7.6.5.32 在我使用此命令编译项目之后 在我的代码中，我能够做到 确保在Release中编译


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luna.newban.cn../../c具有Disabled行为的SessionStateAttribute似乎不起作用堆栈内存溢出.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../c具有Disabled行为的SessionStateAttribute似乎不起作用堆栈内存溢出.html" itemprop="url">c具有Disabled行为的SessionStateAttribute似乎不起作用堆栈内存溢出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-31T00:00:00+00:00">
                2020-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="原文标题"><a href="#原文标题" class="headerlink" title="原文标题:"></a>原文标题:</h2>
SessionStateAttribute with behavior of Disabled seems to not working?



<h2 id="问题"><a href="#问题" class="headerlink" title="问题:"></a>问题:</h2>
我刚刚知道会话状态阻塞，所以我试图用一个简单的MVC项目（创建一个新的MVC项目时默认）来测试禁用那种阻塞。


这是HomeController ，它只涉及About action方法：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[SessionState(System.Web.SessionState.SessionStateBehavior.Disabled)] public class HomeController : Controller &#123; public ActionResult Index() &#123; return View(); &#125; static int c = 0; static long ci; [Authorize] public ActionResult About() &#123; var isSecondRequest = ++c == 2; //Session[&quot;a&quot;] = 1; Debug.Print(&quot;&gt;&gt;&gt; Started working ...&quot; + DateTime.Now); if (isSecondRequest) &#123; Debug.Print(&quot;&gt;&gt;&gt; current counter: &quot; + ci); for (long i = 0; i &lt; 10000000000; i++) ; &#125; else &#123; for (ci = 0; ci &lt; 10000000000; ci++) ; &#125; Debug.Print(&quot;&gt;&gt;&gt; Finished!&quot;); return Content(&quot;welcome&quot;); &#125; &#125;</span><br></pre></td></tr></table></figure>


我首先打开主页的两个标签进行测试。 然后尝试单击第一个选项卡上的“ About链接，几乎立即切换到第二个选项卡，再单击“ About一次。 所以我希望线>>> Started working …应该打印2次，时间戳几乎相同或者差别大约为1或2秒，但实际差异最多为21秒 ，如下所示：


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; Started working ...4/7/2019 3:16:15 PM &gt;&gt;&gt; Started working ...4/7/2019 3:16:36 PM</span><br></pre></td></tr></table></figure>


所以这意味着第二个请求仍然被阻止，当我已经将具有Disabled行为的属性SessionStateAttribute应用于HomeController时，这是意外的。 并且看起来它确实在另一种意义上工作，即每个请求的Session为null 。


你能发现什么问题吗？ 我的总体目的是禁用这种阻塞，以便我可以手动管理并发请求，并立即向客户端返回一些有用的消息（例如第二个请求），这样它就不会显得不必要。


<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h2><p><strong>===============&gt;&gt;#1 票数：0</strong></p>

根据我们的聊天，这是由于它位于同一个控制器上而实际上与会话没有直接关系。 将其移动到单独的控制器时，两个请求同时运行： 随着 允许我这样做很好，显示以下输出： 开始工作... 4/7/2019 1:01:49 PM 开始工作... 4/7/2019 1:01:52 PM 完了！ 完了！ 以下可能是您感兴趣的 “这是交易 - IRouteHandler有一个方法 - GetHttpHandler。当您向控制器发出ASP.Net MVC请求时，默认情况下，路由引擎通过创建MvcRouteHandler的新实例来处理请求，该实例返回MvcHandler.MvcHandler是一个实现IHttpHandler的标记有（surprise！）IRequiresSessionState接口。这就是普通请求使用Session的原因。“ 取自ASP.Net MVC中的每个请求的禁用会话状态


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> public class SecondaryController : Controller</span><br><span class="line">&#123;</span><br><span class="line">    // GET: Secondary</span><br><span class="line">    public ActionResult Index()</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Print(&quot;&gt;&gt;&gt; Started working ...&quot; + DateTime.Now);</span><br><span class="line">        Thread.Sleep(10000);</span><br><span class="line">        Debug.Print(&quot;&gt;&gt;&gt; Finished!&quot;);</span><br><span class="line">        return Content(&quot;welcome&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>===============&gt;&gt;#2 票数：0</strong></p>

我真的不确定，你做错了什么。 我刚刚使用VS2017创建了一个全新的MVC应用程序。 我拿了HomeController并添加了[SessionState(SessionStateBehavior.Disabled)]属性。 然后，我将以下代码添加到Index方法： 在我看来，我补充说： 现在，我启动了应用程序，打开了两个选项卡，并同时加载它们。 结果是： 所以，你可以很容易地看到，他们正在同时处理。 我已经在我的各种应用程序中使用了这个用例几年了，它一直运行良好。 [Authorize]也不应该考虑序列化处理，就像我在我的应用程序中这样做，我从来没有遇到过问题。 我还尝试使用您的代码（将for循环更改为Thread.Sleep）和Windows身份验证。 它的工作原理应该如此。 在我的其他项目中，我通常使用Forms身份验证，而且我也从未遇到过问题。 你使用什么身份验证？


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> public ActionResult Index()</span><br><span class="line">&#123;</span><br><span class="line">    this.ViewBag.Start = DateTime.Now;</span><br><span class="line">    System.Threading.Thread.Sleep(5000);</span><br><span class="line">    this.ViewBag.End = DateTime.Now;</span><br><span class="line">    return View();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../124/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../124/">124</a><span class="page-number current">125</span><a class="page-number" href="../126/">126</a><span class="space">&hellip;</span><a class="page-number" href="../173/">173</a><a class="extend next" rel="next" href="../126/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="http://code.newban.cn/archives/">
              
                  <span class="site-state-item-count">1724</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a rel="external nofollow" class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a rel="external nofollow" class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
